{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Injectable } from '@angular/core';\nimport { finalize } from 'rxjs/operators';\nexport let AuthService = class AuthService {\n  constructor(afAuth, storage) {\n    this.afAuth = afAuth;\n    this.storage = storage;\n    this.userData$ = afAuth.authState;\n  }\n  loginByEmail(user) {\n    const {\n      email,\n      password\n    } = user;\n    return this.afAuth.auth.signInWithEmailAndPassword(email, password);\n  }\n  logout() {\n    this.afAuth.auth.signOut();\n  }\n  preSaveUserProfile(user, image) {\n    if (image) {\n      this.uploadImage(user, image);\n    } else {\n      this.saveUserProfile(user);\n    }\n  }\n  uploadImage(user, image) {\n    this.filePath = `images/${image.name}`;\n    const fileRef = this.storage.ref(this.filePath);\n    const task = this.storage.upload(this.filePath, image);\n    task.snapshotChanges().pipe(finalize(() => {\n      fileRef.getDownloadURL().subscribe(urlImage => {\n        user.photoURL = urlImage;\n        this.saveUserProfile(user);\n      });\n    })).subscribe();\n  }\n  saveUserProfile(user) {\n    this.afAuth.auth.currentUser.updateProfile({\n      displayName: user.displayName,\n      photoURL: user.photoURL\n    }).then(() => console.log('User updated!')).catch(err => console.log('Error', err));\n  }\n};\nAuthService = __decorate([Injectable({\n  providedIn: 'root'\n})], AuthService);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}