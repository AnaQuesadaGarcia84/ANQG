{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { MatSort } from '@angular/material/sort';\nimport { MatTableDataSource } from '@angular/material/table';\nimport Swal from 'sweetalert2';\nimport { ModalComponent } from './../modal/modal.component';\nexport let TableComponent = class TableComponent {\n  constructor(postSvc, dialog) {\n    this.postSvc = postSvc;\n    this.dialog = dialog;\n    this.displayedColumns = ['titlePost', 'tagsPost', 'actions'];\n    this.dataSource = new MatTableDataSource();\n  }\n  ngOnInit() {\n    this.postSvc.getAllPosts().subscribe(posts => this.dataSource.data = posts);\n  }\n  ngAfterViewInit() {\n    this.dataSource.paginator = this.paginator;\n    this.dataSource.sort = this.sort;\n  }\n  applyFilter(filterValue) {\n    this.dataSource.filter = filterValue.trim().toLowerCase();\n  }\n  onEditPost(post) {\n    console.log('Edit post', post);\n    this.openDialog(post);\n  }\n  onDeletePost(post) {\n    Swal.fire({\n      title: 'Are you sure?',\n      text: `You won't be able to revert this!`,\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Yes, delete it!'\n    }).then(result => {\n      if (result.value) {\n        this.postSvc.deletePostById(post).then(() => {\n          Swal.fire('Deleted!', 'Your  post has been deleted.', 'success');\n        }).catch(error => {\n          Swal.fire('Error!', 'There was an error deleting this post', 'error');\n        });\n      }\n    });\n  }\n  onNewPost() {\n    this.openDialog();\n  }\n  openDialog(post) {\n    const config = {\n      data: {\n        message: post ? 'Edit Post' : 'New Post',\n        content: post\n      }\n    };\n    const dialogRef = this.dialog.open(ModalComponent, config);\n    dialogRef.afterClosed().subscribe(result => {\n      console.log(`Dialog result ${result}`);\n    });\n  }\n};\n__decorate([ViewChild(MatPaginator, {\n  static: true\n})], TableComponent.prototype, \"paginator\", void 0);\n__decorate([ViewChild(MatSort, {\n  static: true\n})], TableComponent.prototype, \"sort\", void 0);\nTableComponent = __decorate([Component({\n  selector: 'app-table',\n  templateUrl: './table.component.html',\n  styleUrls: ['./table.component.scss']\n})], TableComponent);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}